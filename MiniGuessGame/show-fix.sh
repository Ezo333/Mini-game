#!/bin/bash

# Display big warning and fix options

clear

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                                                                â•‘"
echo "â•‘            ğŸš¨ BROWSER EXTENSION ERROR DETECTED ğŸš¨              â•‘"
echo "â•‘                                                                â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  Error: Unauthorized request from chrome-extension://..."
echo ""
echo "  This happens when React DevTools or similar extensions"
echo "  try to intercept Expo dev server requests."
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  âš¡ INSTANT FIXES (Pick Any):"
echo ""
echo "  1ï¸âƒ£  INCOGNITO MODE (Recommended - 10 seconds)"
echo "     â†’ Press Ctrl+Shift+N (or Cmd+Shift+N on Mac)"
echo "     â†’ Go to: http://localhost:8081"
echo "     â†’ Done! âœ…"
echo ""
echo "  2ï¸âƒ£  RESTART SERVER (Permanent fix - 30 seconds)"
echo "     â†’ Press Ctrl+C to stop server"
echo "     â†’ Run: npm run start:clear"
echo "     â†’ Done! âœ…"
echo ""
echo "  3ï¸âƒ£  DISABLE EXTENSION (If you prefer - 1 minute)"
echo "     â†’ Go to: chrome://extensions/"
echo "     â†’ Turn off React Developer Tools"
echo "     â†’ Refresh page"
echo "     â†’ Done! âœ…"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  ğŸ“š More Info:"
echo "  â†’ Read: FIX_NOW.md (quick guide)"
echo "  â†’ Read: BROWSER_EXTENSION_FIX.md (detailed guide)"
echo "  â†’ Run: ./fix-extension-error.sh (interactive helper)"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  ğŸ’¡ QUICK TIP:"
echo "  I've created metro.config.js to fix this permanently."
echo "  Just restart your server and it should work!"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

read -p "  Press Enter to open incognito instructions, or Ctrl+C to exit..."

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  ğŸ•µï¸  INCOGNITO MODE STEP-BY-STEP:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  1. Keep your current terminal running"
echo "     (Don't close this or stop the server!)"
echo ""
echo "  2. Open a new incognito window:"
echo ""
if [[ "$OSTYPE" == "darwin"* ]]; then
    echo "     â†’ Press: Cmd+Shift+N"
else
    echo "     â†’ Press: Ctrl+Shift+N"
fi
echo ""
echo "  3. In the incognito window, go to:"
echo ""
echo "     http://localhost:8081"
echo ""
echo "  4. Your app should load without errors! âœ…"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  That's it! Your app should work now."
echo ""
echo "  If you still see errors, try:"
echo "  â†’ npm run start:clear (restart server)"
echo "  â†’ Read FIX_NOW.md for more options"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
